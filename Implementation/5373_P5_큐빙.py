
if __name__ == "__main__":
    t = int(input())

    for _ in range(t):
        n = int(input())
        opes = list(input().split())
        
        c = [
                [['r','r','r'],['r','r','r'],['r','r','r']],
                [['b','b','b'],['b','b','b'],['b','b','b']],
                [['o','o','o'],['o','o','o'],['o','o','o']],
                [['g','g','g'],['g','g','g'],['g','g','g']],
                [['w','w','w'],['w','w','w'],['w','w','w']],
                [['y','y','y'],['y','y','y'],['y','y','y']]
        ]
        
        for ope in opes:
            a,b = ope[0],ope[1]

            if a == 'U':
                if b == '+':
                    temp1,temp2,temp3 = c[0][0][0],c[0][0][1],c[0][0][2]
                    c[0][0][0],c[0][0][1],c[0][0][2] = c[1][0][0],c[1][0][1],c[1][0][2]
                    c[1][0][0],c[1][0][1],c[1][0][2] = c[2][0][0],c[2][0][1],c[2][0][2]
                    c[2][0][0],c[2][0][1],c[2][0][2] = c[3][0][0],c[3][0][1],c[3][0][2]
                    c[3][0][0],c[3][0][1],c[3][0][2] = temp1,temp2,temp3

                    c[4] = list(map(list,zip(*c[4][::-1])))

                elif b == '-':
                    temp1,temp2,temp3 = c[0][0][0],c[0][0][1],c[0][0][2]
                    c[0][0][0],c[0][0][1],c[0][0][2] = c[3][0][0],c[3][0][1],c[3][0][2]
                    c[3][0][0],c[3][0][1],c[3][0][2] = c[2][0][0],c[2][0][1],c[2][0][2]
                    c[2][0][0],c[2][0][1],c[2][0][2] = c[1][0][0],c[1][0][1],c[1][0][2]
                    c[1][0][0],c[1][0][1],c[1][0][2] = temp1,temp2,temp3

                    c[4] = list(map(list,zip(*c[4])))[::-1]

            if a == 'D':
                if b == '+':
                    temp1,temp2,temp3 = c[0][2][0],c[0][2][1],c[0][2][2]
                    c[0][2][0],c[0][2][1],c[0][2][2] = c[3][2][0],c[3][2][1],c[3][2][2]
                    c[3][2][0],c[3][2][1],c[3][2][2] = c[2][2][0],c[2][2][1],c[2][2][2]
                    c[2][2][0],c[2][2][1],c[2][2][2] = c[1][2][0],c[1][2][1],c[1][2][2]
                    c[1][2][0],c[1][2][1],c[1][2][2] = temp1,temp2,temp3

                    c[5] = list(map(list,zip(*c[5][::-1])))

                elif b == '-':
                    temp1,temp2,temp3 = c[0][2][0],c[0][2][1],c[0][2][2]
                    c[0][2][0],c[0][2][1],c[0][2][2] = c[1][2][0],c[1][2][1],c[1][2][2]
                    c[1][2][0],c[1][2][1],c[1][2][2] = c[2][2][0],c[2][2][1],c[2][2][2]
                    c[2][2][0],c[2][2][1],c[2][2][2] = c[3][2][0],c[3][2][1],c[3][2][2]
                    c[3][2][0],c[3][2][1],c[3][2][2] = temp1,temp2,temp3

                    c[5] = list(map(list,zip(*c[5])))[::-1]

            if a == 'F':
                if b == '+':
                    temp1,temp2,temp3 = c[4][2][0],c[4][2][1],c[4][2][2]
                    c[4][2][0],c[4][2][1],c[4][2][2] = c[3][2][2],c[3][1][2],c[3][0][2]
                    c[3][0][2],c[3][1][2],c[3][2][2] = c[5][0][0],c[5][0][1],c[5][0][2]
                    c[5][0][0],c[5][0][1],c[5][0][2] = c[1][2][0],c[1][1][0],c[1][0][0]
                    c[1][0][0],c[1][1][0],c[1][2][0] = temp1,temp2,temp3

                    c[0] = list(map(list,zip(*c[0][::-1])))

                
                elif b == '-':
                    temp1,temp2,temp3 = c[4][2][0],c[4][2][1],c[4][2][2]
                    c[4][2][0],c[4][2][1],c[4][2][2] = c[1][0][0],c[1][1][0],c[1][2][0]
                    c[1][0][0],c[1][1][0],c[1][2][0] = c[5][0][2],c[5][0][1],c[5][0][0]
                    c[5][0][0],c[5][0][1],c[5][0][2] = c[3][0][2],c[3][1][2],c[3][2][2]
                    c[3][0][2],c[3][1][2],c[3][2][2] = temp3,temp2,temp1

                    c[0] = list(map(list,zip(*c[0])))[::-1]

            if a == 'B':
                if b == '+':
                    temp1,temp2,temp3 = c[4][0][2],c[4][0][1],c[4][0][0]
                    c[4][0][2],c[4][0][1],c[4][0][0] = c[1][2][2],c[1][1][2],c[1][0][2]
                    c[1][0][2],c[1][1][2],c[1][2][2] = c[5][0][0],c[5][0][1],c[5][0][2]
                    c[5][0][0],c[5][0][1],c[5][0][2] = c[3][2][0],c[3][1][0],c[3][0][0]
                    c[3][0][0],c[3][1][0],c[3][2][0] = temp1,temp2,temp3

                    c[2] = list(map(list,zip(*c[2][::-1])))
                
                elif b == '-':
                    temp1,temp2,temp3 = c[4][0][2],c[4][0][1],c[4][0][0]
                    c[4][0][2],c[4][0][1],c[4][0][0] = c[3][0][0],c[3][1][0],c[3][2][0]
                    c[3][0][0],c[3][1][0],c[3][2][0] = c[5][0][2],c[5][0][1],c[5][0][0]
                    c[5][0][0],c[5][0][1],c[5][0][2] = c[1][0][2],c[1][1][2],c[1][2][2]
                    c[1][0][2],c[1][1][2],c[1][2][2] = temp3,temp2,temp1

                    c[2] = list(map(list,zip(*c[2])))[::-1]

            if a == 'L':
                if b == '+':
                    temp1,temp2,temp3 = c[4][0][0],c[4][1][0],c[4][2][0]
                    c[4][0][0],c[4][1][0],c[4][2][0] = c[2][2][2],c[2][1][2],c[2][0][2]
                    c[2][0][2],c[2][1][2],c[2][2][2] = c[5][2][0],c[5][1][0],c[5][0][0]
                    c[5][2][0],c[5][1][0],c[5][0][0] = c[0][2][0],c[0][1][0],c[0][0][0]
                    c[0][0][0],c[0][1][0],c[0][2][0] = temp1,temp2,temp3

                    c[3] = list(map(list,zip(*c[3][::-1])))
                    
                elif b == '-':
                    temp1,temp2,temp3 = c[4][0][0],c[4][1][0],c[4][2][0]
                    c[4][0][0],c[4][1][0],c[4][2][0] = c[0][0][0],c[0][1][0],c[0][2][0]
                    c[0][0][0],c[0][1][0],c[0][2][0] = c[5][0][0],c[5][1][0],c[5][2][0]
                    c[5][2][0],c[5][1][0],c[5][0][0] = c[2][0][2],c[2][1][2],c[2][2][2]
                    c[2][0][2],c[2][1][2],c[2][2][2] = temp3,temp2,temp1

                    c[3] = list(map(list,zip(*c[3])))[::-1]

            if a == 'R':
                if b == '+':
                    temp1,temp2,temp3 = c[4][2][2],c[4][1][2],c[4][0][2]
                    c[4][2][2],c[4][1][2],c[4][0][2] = c[0][2][2],c[0][1][2],c[0][0][2]
                    c[0][0][2],c[0][1][2],c[0][2][2] = c[5][0][2],c[5][1][2],c[5][2][2]
                    c[5][0][2],c[5][1][2],c[5][2][2] = c[2][0][2],c[2][0][1],c[2][0][0]
                    c[2][0][0],c[2][1][0],c[2][2][0] = temp1,temp2,temp3

                    c[1] = list(map(list,zip(*c[1][::-1])))

                elif b == '-':
                    temp1,temp2,temp3 = c[4][2][2],c[4][1][2],c[4][0][2]
                    c[4][2][2],c[4][1][2],c[4][0][2] = c[2][0][0],c[2][1][0],c[2][2][0]
                    c[2][0][0],c[2][1][0],c[2][2][0] = c[5][2][2],c[5][1][2],c[5][0][2]
                    c[5][0][2],c[5][1][2],c[5][2][2] = c[0][0][2],c[0][1][2],c[0][2][2]
                    c[0][0][2],c[0][1][2],c[0][2][2] = temp3,temp2,temp1

                    c[1] = list(map(list,zip(*c[1])))[::-1]


        

        for i in range(3):
            for j in range(3):
                print(c[4][i][j],end='')
            print()